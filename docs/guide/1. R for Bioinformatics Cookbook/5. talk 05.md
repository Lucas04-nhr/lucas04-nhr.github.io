---
title: Data wrangler, part 1
createTime: 2025/12/07 21:59:34
permalink: /docs/r-course/talk05/
---

## Talk 05 {#talk05}

::: note
Reference: [R for Data Science](https://r4ds.had.co.nz)

The book updated to 2^nd^ ed. on July, 2023, hereâ€™s a [link](https://r4ds.hadley.nz) to the official website.

::: flex around center
<LinkCard 
    icon="ic:outline-description"
    title="View the original slide"
    href="https://github.com/Lucas04-nhr/R-for-Data-Science/blob/main/talk05.pdf" >
</LinkCard>

<LinkCard 
    icon="ic:round-document-scanner"
    title="View the original Rmd file"
    href="https://github.com/Lucas04-nhr/R-for-Data-Science/blob/main/talk05.Rmd" >
</LinkCard>
:::

:::

## Pipe in R {#pipe}

### What is pipe in R? {#what-is-pipe-in-r}

- Pipe is `%>%`.
- It comes from the `magrittr` package by **Stefan Milton Bache**.
- Packages in the `tidyverse` load `%\>%` for you automatically, so you don't usually load `magrittr` explicitly.
- The essence is the passing of intermediate values.

==**Example**=={.note}

```R
library(tidyverse)
library(magrittr)
a = subset(swiss, Fertility > 20)
cor.test(a$Fertility, a$Education)
```

The code above can be replaced by:

```R
swiss %>%
  subset(., Fertility > 20) %$%
  cor.test(Education, Fertility)
```

You should remember that almost **all** the funtions support pipe.

### Other kinds of pipe

- `%T>%`: Return left-side values
- `%$>%`: Attach the left-side values
- `%<>%`: Assignment pipe

==**Example**=={.note}

::: code-tabs
@tab Return left-side values

```R
swiss %>%
  subset(., Fertility > 20) %T>%
  {print(head(.))} %>%
  cor.test(.$Education, .$Fertility)
```

@tab Attach the left-side values

```R
swiss %>%
  subset(., Fertility > 20) %$>%
  cor.test(Education, Fertility)
```

@tab Assignment pipe

```R
a = swiss$Fertility
a %<>% log10()
head(a)
```

:::

::: tip
The use of pipe makes the idea clearer, therefore, try to use `%>%` (which has a clear direction) instead of the other pipe, which has an unclear direction.
:::

---

## Data Wrangler - `dplyr` {#dplyr}

### What is `dplyr`? {#what-is-dplyr}

- The next iteration of `plyr`,
- Focusing on only data frames (also tibble),
- Row-based manipulation,
- `dplyr` is faster and has a more consistent API.

`dplyr` provides a consistent set of verbs that help you **solve the most common data manipulation challenges**:

- [`select()`](https://dplyr.tidyverse.org/reference/select.html) Select columns, based on column name rules.
- [`filter()`](https://dplyr.tidyverse.org/reference/filter.html) Filter rows by rule.
- [`mutate()`](https://dplyr.tidyverse.org/reference/mutate.html) Add new column, calculated from other columns (no change in number of rows).
- [`summarise()`](https://dplyr.tidyverse.org/reference/summarise.html) Converts multiple values to a single value (via mean, median, sd, etc.), generating new columns (total number of rows is reduced, usually in conjunction with `group_by`).
- [`arrange()`](https://dplyr.tidyverse.org/reference/arrange.html) Sorting the rows.

```R
# Read the file
library(tidyverse)
mouse.tibble =
  read_delim(
    file = "data/mouse_genes_biomart_sep2018.txt",
    delim = "\t",
    quote = "",
    show_col_types = FALSE
  )

# View mouse.tibble content
ttype.stats =
  mouse.tibble %>%
    count(`Transcript type`) %>%
    arrange(-n)

# View mouse.tibble content, cont.
chr.stats =
  mouse.tibble %>%
    count(`Chromosome/scaffold name`) %>%
    arrange(-n)
```
